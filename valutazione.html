<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Recensioni</title>
  <style>
    body, html {
      margin: 0; padding: 0; height: 100%;
      background: white;
      font-family: sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
    }
.container {
  width: 100%;
  max-width: 800px;
  padding: 1em;
  box-sizing: border-box;
  height: 200px; /* altezza predefinita */
  overflow: hidden;
  position: relative;
}
/* SOLO per schermi piccoli (smartphone) */
@media (max-width: 600px) {
  .container {
    height: auto; /* il box si adatta al testo */
    min-height: 150px;
  }
}
    .item {
      position: absolute;
      top: 0; left: 0; right: 0;
      opacity: 0;
      transition: opacity 1s ease-in-out;
      padding: 1em;
      background: #fff;
      border-radius: 5px;
      box-sizing: border-box;
      line-height: 1.5;
      overflow: hidden;
      max-height: 100%;
    }
    .item.active {
      opacity: 1;
      position: relative;
    }
    .testo {
      margin: 0 0 0.5em 0;
      font-weight: normal;
      font-size: clamp(1rem, 2.5vw, 1.3rem);
      max-height: 140px; /* spazio per la firma */
      overflow: hidden;
      position: relative;
    }
    .testo.scroll {
      animation-name: scrollText;
      animation-timing-function: linear;
      animation-fill-mode: forwards;
      animation-duration: var(--scroll-duration);
      animation-delay: 2s; /* lascia 2s prima di iniziare a scrollare */
    }
    .firma {
      margin: 0;
      color: #007179;
      font-style: italic;
      font-size: clamp(0.9rem, 2vw, 1.1rem);
    }
    @keyframes scrollText {
      from {
        transform: translateY(0);
      }
      to {
        transform: translateY(calc(-1 * var(--scroll-amount)));
      }
    }
    @media (min-width: 768px) and (max-width: 1024px) {
      .testo {
        font-size: 1.3rem;
      }
      .firma {
        font-size: 1.1rem;
      }
    }
    @media (max-width: 400px) {
      .testo {
        font-size: 1.1rem;
      }
      .firma {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    
        <div class="item">
          <p class="testo">Completo e trasformativo</p>
          <p class="firma"><em>— Thea</em></p>
        </div>
      
        <div class="item">
          <p class="testo">Persona molto molto preparata,ha rimesso letteralmente in piedi mio papà di 84 anni,</p>
          <p class="firma"><em>— Gerardi Luca</em></p>
        </div>
      
        <div class="item">
          <p class="testo">Michela è molto gentile e bravissima nel suo lavoro. Già dopo la prima seduta mi sentivo meglio, mi ha dato degli esercizi da fare a casa che hanno fatto effetto subito. Nel giro di poche settimane ho riattivato e riequilibrato i muscoli del core, acquisendo così stabilità e forza per affrontare la vita quotidiana con due bimbi piccoli.</p>
          <p class="firma"><em>— Livia O.</em></p>
        </div>
      
        <div class="item">
          <p class="testo">Professionista molto competente, capace e positiva.</p>
          <p class="firma"><em>— Pamela C.</em></p>
        </div>
      
        <div class="item">
          <p class="testo">Sono in gravidanza e Michela ha risolto in poco dei dolori che mi portavo da diverso tempo. <br>Molto professionale, empatica, ottima professionista oltre che ottima persona. <br>Sa ascoltare e consiglia esercizi da fare a casa che aiutano nella vita di tutti i giorni. <br>Consigliatissima!!!!</p>
          <p class="firma"><em>— Anonimo</em></p>
        </div>
      
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const items = document.querySelectorAll(".item");
      let index = 0;
      const displayTime = 7000; // tempo fisso prima di switchare (7s)
      const fadeDuration = 1000; // 1s fade

      function resetScroll(el) {
        el.style.animation = 'none';
        el.style.setProperty('--scroll-duration', '');
        el.style.setProperty('--scroll-amount', '');
        el.offsetHeight; // force reflow
        el.style.animation = null;
      }

      function showItem(i) {
        items.forEach((item, idx) => {
          item.classList.remove("active");
          const testo = item.querySelector(".testo");
          if (testo) {
            resetScroll(testo);
            testo.classList.remove("scroll");
          }
          item.style.position = "absolute";
          item.style.opacity = 0;
        });

        const current = items[i];
        current.classList.add("active");
        current.style.position = "relative";
        current.style.opacity = 1;

        const testo = current.querySelector(".testo");
        if (!testo) return;

        // Controllo altezza testo per scroll
        if (testo.scrollHeight > testo.clientHeight) {
          const scrollAmount = testo.scrollHeight - testo.clientHeight;
          // durata di scroll: 50px al secondo
          const duration = scrollAmount / 50 * 1000;

          testo.style.setProperty('--scroll-amount', scrollAmount + 'px');
          testo.style.setProperty('--scroll-duration', duration + 'ms');

          // aggiungo classe che attiva animazione scroll
          setTimeout(() => {
            testo.classList.add("scroll");
          }, 2000); // scroll inizia dopo 2s
          // incremento tempo totale di visualizzazione con scroll
          return displayTime + duration + 2000;
        }
        return displayTime;
      }

      let timeoutId;
      function next() {
        let duration = showItem(index);
        index = (index + 1) % items.length;
        timeoutId = setTimeout(next, duration);
      }

      if (items.length > 0) {
        next();
      }
    });
  </script>
</body>
</html>